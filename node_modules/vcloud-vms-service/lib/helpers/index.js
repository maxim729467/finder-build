const getFfmpegStreamArgs = (streamUrl, entryPrefix, folderPath, fileName) => {
  return [
    // '-use_wallclock_as_timestamps 1',
    '-fflags nobuffer',
    '-stimeout 5000000',
    '-rtsp_transport tcp',
    `-i ${streamUrl}`,
    '-vsync 0',
    '-copyts',
    '-vcodec h264',
    '-movflags frag_keyframe+empty_moov',
    '-an',
    '-hls_flags delete_segments+append_list',
    '-f hls',
    '-loglevel error',
    '-hls_time 10',
    '-hls_list_size 10',
    '-use_localtime 1',
    '-strftime 1',
    `-hls_segment_filename ${folderPath}/${fileName}-%Y%m%d-%s.ts`,
    `${folderPath}/${fileName}.m3u8`,
  ];
};

const getPID = (stream) => stream ? stream.pid : null;

module.exports = {
  getFfmpegStreamArgs,
  getPID
};
