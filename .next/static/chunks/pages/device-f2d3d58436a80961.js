(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{4767:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}}),r(7294);var n=r(1505),s=r(9521).ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-jeejul-0"})(["display:flex;width:100%;height:100%;align-items:center;justify-content:center;z-index:8;",";"],function(e){return e.customStyles}),a=r(5893),i=function(e){var t=e.customStyles;return(0,a.jsx)(s,{customStyles:t,children:(0,a.jsx)(n.BR,{color:"#0087FF",height:25,width:25})})}},2109:function(e,t,r){"use strict";r(7294);var n=r(2920),s=r(5893),a=function(e){var t=e.type,r=e.message;return n.Am[t]((0,s.jsx)("div",{style:{display:"flex"},children:(0,s.jsx)("div",{style:{flexGrow:1,fontSize:15,padding:"8px 12px"},children:r})}),{toastId:"customId"})};a.dismiss=n.Am.dismiss,t.Z=a},9004:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var n=r(7294),s=r(29),a=r(7794),i=r.n(a),o=r(5675),u=r.n(o),p=r(4767),c=r(1305),d=r(9521),l=d.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1xjw84o-0"})(["width:100%;padding:25px;display:flex;align-items:center;justify-content:center;"]),x=d.ZP.div.withConfig({displayName:"styles__InputWrapper",componentId:"sc-1xjw84o-1"})(["margin-bottom:25px;position:relative;"]),f=d.ZP.form.withConfig({displayName:"styles__Form",componentId:"sc-1xjw84o-2"})(["display:flex;flex-direction:column;align-items:center;"]),m=d.ZP.div.withConfig({displayName:"styles__Label",componentId:"sc-1xjw84o-3"})(['font-size:13px;font-family:"Montserrat";font-weight:300;color:rgb(191,205,217);margin-bottom:10px;user-select:none;']),g=d.ZP.input.withConfig({displayName:"styles__Input",componentId:"sc-1xjw84o-4"})(['background-color:rgb(16,27,38);padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:"Montserrat";font-weight:400;border-radius:4px;border:1px solid rgb(46,68,88);outline:none;height:38px;max-width:600px;width:50vw;min-width:300px;padding:0 10px;&:focus,&:active{border:1px solid #1787fc;}']),h=d.ZP.input.withConfig({displayName:"styles__SelectInput",componentId:"sc-1xjw84o-5"})(['background-color:rgb(16,27,38);padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:"Montserrat";font-weight:400;border-radius:4px;border:1px solid rgb(46,68,88);outline:none;height:38px;max-width:600px;width:50vw;min-width:300px;padding:0 10px;cursor:pointer;']),w=d.ZP.input.withConfig({displayName:"styles__IPInput",componentId:"sc-1xjw84o-6"})(['height:45px;background-color:rgb(16,27,38);padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:"Montserrat";font-weight:400;border-radius:4px;border:1px solid rgb(46,68,88);outline:none;width:100%;padding:0 10px;&:focus,&:active{border:1px solid #1787fc;}']),y=d.ZP.input.withConfig({displayName:"styles__PortInput",componentId:"sc-1xjw84o-7"})(['height:45px;background-color:rgb(16,27,38);padding:12px 0px 11px;font-size:16px;color:rgb(255,255,255);font-family:"Montserrat";font-weight:400;border-radius:4px;border:1px solid rgb(46,68,88);outline:none;width:100%;padding:0 10px;&:focus,&:active{border:1px solid #1787fc;}']),v=d.ZP.button.withConfig({displayName:"styles__Button",componentId:"sc-1xjw84o-8"})(['display:flex;justify-content:space-around;align-items:center;box-sizing:border-box;height:39px;background-color:rgb(180,226,0);border-radius:3rem;outline:none;border:none;font-size:16px;font-family:"Montserrat";font-weight:400;cursor:pointer;user-select:none;width:160px;']),b=d.ZP.div.withConfig({displayName:"styles__HorizontalRow",componentId:"sc-1xjw84o-9"})(["display:flex;align-items:center;justify-content:space-between;max-width:600px;width:50vw;min-width:300px;"]),j=d.ZP.div.withConfig({displayName:"styles__DropdownWrapper",componentId:"sc-1xjw84o-10"})(["position:relative;display:flex;align-items:center;"]),Z=d.ZP.div.withConfig({displayName:"styles__DropdownButton",componentId:"sc-1xjw84o-11"})(["width:38px;height:38px;background-color:#0087ff;border-radius:4px;display:flex;justify-content:center;align-items:center;position:absolute;right:0;cursor:pointer;",";"],function(e){return e.customStyles}),_=d.ZP.div.withConfig({displayName:"styles__OptionsWrapper",componentId:"sc-1xjw84o-12"})(["display:flex;flex-direction:column;position:absolute;border-radius:5px;background-color:rgb(23,42,59);z-index:2;max-height:200px;overflow-y:auto;box-shadow:rgb(16 27 38) 1px 2px 5px;width:calc(100% - 38px);padding:5px 0px;top:40px;padding:10px;"]),k=d.ZP.div.withConfig({displayName:"styles__Option",componentId:"sc-1xjw84o-13"})(['cursor:pointer;font-size:16px;font-family:"Montserrat";font-weight:300;height:30px;color:rgb(191,205,217);user-select:none;']),I=r(2109),P=r(6825),C=r(1517),N=r(4865),S=r(5893),R=["RTSP","ONVIF"],z=function(){var e,t=(0,n.useState)(!1),r=t[0],a=t[1],o=(0,n.useState)(!1),d=o[0],z=o[1],q=(0,n.useState)(R[0]),M=q[0],A=q[1],L=(0,n.useRef)(null),$=(0,n.useRef)(null),O=(0,n.useRef)(null),E=(0,n.useRef)(null),U=(0,n.useRef)(null),W=(0,n.useRef)(null),B=M===R[0],D=(e=(0,s.Z)(i().mark(function e(t){var r,n,s,o,u,p,c,d,l,x;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),p={name:L.current.value,login:U.current.value,password:W.current.value,type:M},M===R[0]?p.url=E.current.value:(p.ip=$.current.value,p.port=O.current.value),null!==(r=p.name)&&void 0!==r&&r.trim().length){e.next=6;break}return(0,I.Z)({type:"error",message:"Name is required"}),e.abrupt("return");case 6:if(null!==(n=p.login)&&void 0!==n&&n.trim().length){e.next=9;break}return(0,I.Z)({type:"error",message:"Login is required"}),e.abrupt("return");case 9:if(!(B&&!(null!==(s=p.url)&&void 0!==s&&s.trim().length))){e.next=12;break}return(0,I.Z)({type:"error",message:"URL is required"}),e.abrupt("return");case 12:if(!(!B&&!(null!==(o=p.ip)&&void 0!==o&&o.trim().length))){e.next=15;break}return(0,I.Z)({type:"error",message:"IP is required"}),e.abrupt("return");case 15:if(!(!B&&!(null!==(u=p.port)&&void 0!==u&&u.trim().length))){e.next=18;break}return(0,I.Z)({type:"error",message:"Port is required"}),e.abrupt("return");case 18:if(c=/^\w{2,}$/.test(p.name),d=/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/.test(p.ip),l=/^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$|^(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})-(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[0-9]{1,4})$/.test(p.port),x=/^rtsp:\/\/.+\/.*$/.test(p.url),c){e.next=25;break}return(0,I.Z)({type:"error",message:"Name must be at least 2 characters"}),e.abrupt("return");case 25:if(!(!B&&!d)){e.next=28;break}return(0,I.Z)({type:"error",message:"Invalid IP"}),e.abrupt("return");case 28:if(!(!B&&!l)){e.next=31;break}return(0,I.Z)({type:"error",message:"Invalid port"}),e.abrupt("return");case 31:if(!(B&&!x)){e.next=34;break}return(0,I.Z)({type:"error",message:"URL must have RTSP protocol"}),e.abrupt("return");case 34:return e.prev=34,a(!0),e.next=38,(0,P.vV)(p);case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(34),console.log(e.t0);case 43:return e.prev=43,a(!1),e.finish(43);case 46:case"end":return e.stop()}},e,null,[[34,40,43,46]])})),function(t){return e.apply(this,arguments)});return(0,S.jsx)(l,{children:(0,S.jsxs)(f,{onSubmit:D,children:[(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"Device name"}),(0,S.jsx)(g,{ref:L,type:"text"})]}),(0,S.jsx)(c.Z,{onClickAway:function(){return z(!1)},children:(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"Camera type"}),(0,S.jsxs)(j,{children:[(0,S.jsx)(h,{onClick:function(){return z(function(e){return!e})},readOnly:!0,value:M}),(0,S.jsx)(Z,{onClick:function(){return z(function(e){return!e})},children:(0,S.jsx)(u(),{src:d?N.Z:C.Z,alt:"",width:10,height:10})}),d&&(0,S.jsx)(_,{children:R.map(function(e){return(0,S.jsx)(k,{onClick:function(){A(e),z(function(e){return!e})},children:e},e)})})]})]})}),M!==R[0]?(0,S.jsxs)(b,{children:[(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"IP"}),(0,S.jsx)(w,{ref:$,type:"text",placeholder:"IP"})]}),(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"Port"}),(0,S.jsx)(y,{ref:O,type:"text",placeholder:"Port"})]})]}):(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"Url"}),(0,S.jsx)(g,{ref:E,type:"text"})]}),(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"Login"}),(0,S.jsx)(g,{ref:U,type:"text"})]}),(0,S.jsxs)(x,{children:[(0,S.jsx)(m,{children:"Password"}),(0,S.jsx)(g,{ref:W,type:"password"})]}),r?(0,S.jsx)(p.Z,{}):(0,S.jsx)(v,{type:"submit",children:"Add"})]})})};function q(){return(0,S.jsx)(z,{})}},6825:function(e,t,r){"use strict";r.d(t,{Ih:function(){return _},Vb:function(){return b},YL:function(){return w},jU:function(){return Z},qL:function(){return h},qm:function(){return v},vV:function(){return y},vq:function(){return j}});var n,s,a,i,o,u,p,c,d=r(29),l=r(7794),x=r.n(l),f=r(9669),m=r.n(f),g=r(2109),h=(n=(0,d.Z)(x().mark(function e(){var t,r;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().get("/api/networkRange");case 3:return r=e.sent.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),(0,g.Z)({type:"error",message:e.t0.message});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return n.apply(this,arguments)}),w=(s=(0,d.Z)(x().mark(function e(t){var r,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().post("/api/searchCamerasInSubnet",t);case 3:return n=e.sent.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),(0,g.Z)({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),y=(a=(0,d.Z)(x().mark(function e(t){var r,n,s,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().post("/api/addCameraInfo",t);case 3:return n=e.sent.data,(0,g.Z)({type:"info",message:n.message}),e.abrupt("return",n);case 9:if(e.prev=9,e.t0=e.catch(0),!(null!==(s=e.t0.response)&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a.message)){e.next=14;break}return(0,g.Z)({type:"error",message:e.t0.response.data.message}),e.abrupt("return",null);case 14:(0,g.Z)({type:"error",message:"Something went wrong"});case 15:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return a.apply(this,arguments)}),v=(i=(0,d.Z)(x().mark(function e(t){var r,n,s,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().post("/api/addBulkCameras",{cameras:t});case 3:return n=e.sent.data,e.abrupt("return",n.addedCameras);case 8:if(e.prev=8,e.t0=e.catch(0),!(null!==(s=e.t0.response)&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a.message)){e.next=13;break}return(0,g.Z)({type:"error",message:e.t0.response.data.message}),e.abrupt("return");case 13:(0,g.Z)({type:"error",message:"Something went wrong"});case 14:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return i.apply(this,arguments)}),b=(o=(0,d.Z)(x().mark(function e(){var t,r,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().get("/api/devices");case 3:return r=e.sent.data,e.abrupt("return",r.cameras);case 8:if(e.prev=8,e.t0=e.catch(0),!(null!==(n=e.t0.response)&&void 0!==n&&null!==(s=n.data)&&void 0!==s&&s.message)){e.next=13;break}return(0,g.Z)({type:"error",message:e.t0.response.data.message}),e.abrupt("return");case 13:(0,g.Z)({type:"error",message:"Something went wrong"});case 14:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return o.apply(this,arguments)}),j=(u=(0,d.Z)(x().mark(function e(){var t,r,n,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().delete("/api/devices");case 3:return r=e.sent.data,e.abrupt("return",r.cameras);case 8:if(e.prev=8,e.t0=e.catch(0),!(null!==(n=e.t0.response)&&void 0!==n&&null!==(s=n.data)&&void 0!==s&&s.message)){e.next=13;break}return(0,g.Z)({type:"error",message:e.t0.response.data.message}),e.abrupt("return");case 13:(0,g.Z)({type:"error",message:"Something went wrong"});case 14:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return u.apply(this,arguments)}),Z=(p=(0,d.Z)(x().mark(function e(t){var r,n,s,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().delete("/api/deleteAddedCamera",{params:{name:t.name,url:t.url,port:t.port,ip:t.ip,id:t.id}});case 3:return n=e.sent.data,e.abrupt("return",n.cameras);case 8:if(e.prev=8,e.t0=e.catch(0),!(null!==(s=e.t0.response)&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a.message)){e.next=13;break}return(0,g.Z)({type:"error",message:e.t0.response.data.message}),e.abrupt("return");case 13:(0,g.Z)({type:"error",message:"Something went wrong"});case 14:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return p.apply(this,arguments)}),_=(c=(0,d.Z)(x().mark(function e(t,r){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().patch("/api/editStream",{id:t,isMainStream:r});case 3:(0,g.Z)({type:"info",message:"Successfully updated stream source"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(0,g.Z)({type:"error",message:"Something went wrong"});case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t){return c.apply(this,arguments)})},8503:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/device",function(){return r(9004)}])},1517:function(e,t){"use strict";t.Z={src:"/_next/static/media/dropdownArrow.5a57e90d.svg",height:7,width:11}},4865:function(e,t){"use strict";t.Z={src:"/_next/static/media/dropdownArrowUp.53dad0f4.svg",height:7,width:11}}},function(e){e.O(0,[18,774,888,179],function(){return e(e.s=8503)}),_N_E=e.O()}]);